<!DOCTYPE html>

<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CB Billing Page</title>
    </head>
    
    <body style="font-family: monospace">
        
        <header>
            <h1>CB BILLING PAGE</h1>
            <br><hr><br>
        </header>
        
        <main>
            <u>INVOICE DETAILS</u>
            <br><br>
            <form id="inv_det">

                <label for="inv_num">INVOICE NO.:</label>
                <input type="text" id="inv_num" required style="font-family: monospace;">
                <br>

                <label for="Name">Name:</label>
                <input type="text" id="Name" required style="font-family: monospace;">
                <br>

                
                <label for="ph">Phone:</label>
                <input type="tel" id="ph" pattern="[0-9]{10}" required style="font-family: monospace;">
                <br>


                <label for="addr">Address:</label>
                <input type="text" id="addr" required style="font-family: monospace;">
                <br>


                <label for="date">Date:</label>
                <input type="date" id="date" required style="font-family: monospace;">
                <br>

                <input type="reset" style="font-family: monospace;" title="CLEAR" value="CLEAR">
                <br>

                <br><hr><br>

            </form>

            <table>
                <tr>
                    <th width="10"></th>
                    <th width="100">Product Name:</th>
                    <th width="10">Rate:</th>
                    <th width="10">Qty:</th>
                </tr>
                <tr>
                    <form id="item_entry">
                        <td style="width: 50px;"></td>
                        <td><input type="text" style="width: 250px;"></td>
                        <td><input type="number" step="0.01" style="width: 50px;"></td>
                        <td><input type="number" step="1" style="width: 50px;"></td>
                        <td><button type="button" onclick="addItem()">+</button></td>
                        <td><input type="reset" style="font-family: monospace;" title="CLEAR" value="Ã—"></td>
                    </form>
                </tr>
            </table>
            <hr>
            <table border="1" id="item_list">
                <tr>
                    <th style="width: 50px;">No.</th>
                    <th style="width: 250px; max-width: 250px; word-wrap: break-word; overflow-wrap: break-word;">Product Name</th>
                    <th style="width: 50px;">Rate(â‚¹)</th>
                    <th style="width: 50px;">Qty</th>
                    <th style="width: 50px;">Amount(â‚¹)</th>
                </tr>
            </table>

            <table border="1" id="total">
                <tr>
                    <th style="width: 50px;">Total(â‚¹)</th>
                    <td style="width: 50px;" id="total_amount">0.00</td>
                </tr>
                <tr>
                    <th style="width: 50px;">CGST(2.5%)</th>
                    <td style="width: 50px;" id="cgst">0.00</td>
                </tr>
                <tr>
                    <th style="width: 50px;">SGST(2.5%)</th>
                    <td style="width: 50px;" id="sgst">0.00</td>
                </tr>
                <tr>
                    <th style="width: 50px;">Final(â‚¹)</th>
                    <td style="width: 50px;" id="final">0.00</td>
                </tr>
            </table>

            <button onclick="printInvoice()">ðŸ–¶</button>

        </main>

        <footer>
            <br><hr><br>
            &copy; 2025 All rights reserved.
        </footer>

    </body>

    <script>
        function addItem()
        {
            const itemEntryForm = document.getElementById('item_entry');
            const productName = itemEntryForm.elements[0].value;
            const rate = parseFloat(itemEntryForm.elements[1].value);
            const qty = parseInt(itemEntryForm.elements[2].value);
            const amount = rate * qty;

            if (productName && !isNaN(rate) && !isNaN(qty)) 
            {
                const itemListTable = document.getElementById('item_list');
                const newRow = itemListTable.insertRow();
                
                const cellNo = newRow.insertCell(0);
                const cellName = newRow.insertCell(1);
                const cellRate = newRow.insertCell(2);
                const cellQty = newRow.insertCell(3);
                const cellAmount = newRow.insertCell(4);
                const cellEdit = newRow.insertCell(5);
                const cellDelete = newRow.insertCell(6);

                cellNo.textContent = itemListTable.rows.length - 1; // Adjust for header row
                cellName.textContent = productName;
                cellRate.textContent = rate.toFixed(2);
                cellQty.textContent = qty;
                cellAmount.textContent = amount.toFixed(2);

                // Edit button
                const editBtn = document.createElement('button');
                editBtn.textContent = 'âœŽ';
                editBtn.onclick = function() 
                {
                    // Simple edit: fill form with row data
                    itemEntryForm.elements[0].value = cellName.textContent;
                    itemEntryForm.elements[1].value = cellRate.textContent;
                    itemEntryForm.elements[2].value = cellQty.textContent;
                    // Remove row for re-adding after edit
                    itemListTable.deleteRow(newRow.rowIndex);
                    renumberRows();
                };
                cellEdit.appendChild(editBtn);

                // Delete button
                const delBtn = document.createElement('button');
                delBtn.textContent = 'ðŸ—‘';
                delBtn.onclick = function() 
                {
                    itemListTable.deleteRow(newRow.rowIndex);
                    renumberRows();
                };
                cellDelete.appendChild(delBtn);

                updateTotal()

                itemEntryForm.reset();
                } 
            else 
            {
                alert("Please fill in all fields correctly.");
            }
        }

        function renumberRows() 
        {
            const itemListTable = document.getElementById('item_list');
            for (let i = 1; i < itemListTable.rows.length; i++) 
            {
                itemListTable.rows[i].cells[0].textContent = i; // Update row number
            }
        }
        function updateTotal() 
        {
            const itemListTable = document.getElementById('item_list');
            let total = 0;

            for (let i = 1; i < itemListTable.rows.length; i++) 
            {
                const amount = parseFloat(itemListTable.rows[i].cells[4].textContent);
                total += amount;
            }

            const cgst = total * 0.025;
            const sgst = total * 0.025;
            const finalTotal = total + cgst + sgst;

            document.getElementById('total_amount').textContent = total.toFixed(2);
            document.getElementById('cgst').textContent = cgst.toFixed(2);
            document.getElementById('sgst').textContent = sgst.toFixed(2);
            document.getElementById('final').textContent = finalTotal.toFixed(2);
        }

        function printInvoice() 
        {
            window.print();
        }
    </script>

</html>